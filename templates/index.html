<!doctype html>
<html>
<head>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
  <script src ="https://cdn.jsdelivr.net/xcharts/0.1.3/xcharts.min.js"></script>
  <!-- Optional theme <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> -->
  <link href="http://getbootstrap.com/examples/cover/cover.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/xcharts/0.1.3/xcharts.min.css" rel ="stylesheet">



</head>
<body>
  <div class="site-wrapper">
    <div class="site-wrapper-inner">
      <div class="cover-container">
        <div class="masthead clearfix">
          <div class="inner">
            <!--    <h3 class="masthead-brand">CellProfiler for Openstack</h3>   -->
            <nav>
              <ul class="nav masthead-nav">
                <li class="active"><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="inner cover">
          <h3 class="masthead-brand">CellProfiler for Openstack</h3>
        </div>

        <form action="/run" method="post">
          <div class="form-group inline">
            <select id="input-container" name="input-container" class="form-control col-xs-6">
              {% for container in containers%}
              <option>{{container}}</option>
              {% endfor %}
            </select>

            <select id="output-container" name="output-container" class="form-control col-xs-6">
              {% for container in containers %}
              <option>{{container}}</option>
              {% endfor %}
            </select>
          </div>
          <div  class=form-group"">
            <select multiple id="meta-data" name="meta-data" class="form-control col-xs-12">
            </select>
          </div>

          <div class="div col-xs-3 form-group">
            <label class="sr-only">#Slaves</label>
            <input type="text" class="form-control" name="slave-count" placeholder="#Slaves">
          </div>
          <button type="submit"  class="col-xs-3 btn btn-default">Run CPOSP</button>
        </form>
        <p class="lead">
        </p>
      </div>
      <div class="mastfoot">
      </div>

    </div>

  </div>

</div>

</body>
<!-- Latest compiled and minified JavaScript -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
function checkAddress(anUrl){

};
$('#input-container').change(function(){
  $.ajax({
    url:'/objects',
    data:{'container' : $(this).val()},
    context: document.body
  }).done(function(data){
    var response = $.parseJSON(data)
    console.log(response)
    $('#meta-data').empty()
    for (var obj in response){
      $('#meta-data').append('<option>'.concat(response[obj],'</option>'))
      console.log('<option>'.concat(response[obj],'</option>'))
    }
  })
});


$( '#identity' )
.focusout(function() {
  $.ajax({
    url: '/checkAddress',
    data: {'url' : $( this ).val()},
    context: document.body
  }).done(function(data) {
    var response = $.parseJSON(data)
    if(response.status == 'ok'){
      console.log(response.status)
    }else{
      console.log(response.status)
    }

  });

})
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</html>
